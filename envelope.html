<!DOCTYPE html>
<html lang="en">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta http-equiv="content-type" content="text/html;charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>RHAPSODIA 冬季舞会</title>
    <link rel="stylesheet" type="text/css" href="css/envelope.css">
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/datab.js"></script>
</head>

<body>
    <div class="open_card vcenter">
        <div class="cardpage " onclick="flip()" id="card" width-max="90%" margin-left=“auto” margin-right=“auto”>
            <div class="card  card__face__abs card__face--front"><img src="img/page.jpg" class="imgcard" id="img1"
                    max-height="1000px">
            </div>
            <div class="card card__face__abs_in card__face--back card__rotate__face--back">
                <div class="ltextgroup">
                    <p class="lucktext"></p>
                    <p class="lucktext"></p>
                    <p class="lucktext"></p>
                    <p class="lucktext"></p>
                    <p class="lucktext"></p>
                    <p class="lucktext"></p>
                    <p class="lucktext"></p>
                </div>
                <div class="notextgroup">
                    <p class="nolucktext"></p>
                    <p class="nolucktext"></p>
                    <p class="nolucktext"></p>
                    <p class="nolucktext"></p>
                    <p class="nolucktext"></p>
                    <p class="nolucktext"></p>
                </div>
                <div class="textgroup">
                    <p class="unlucktext"></p>
                    <p class="unlucktext"></p>
                    <p class="unlucktext"></p>
                    <p class="unlucktext"></p>
                </div>
                <img src="img/inside.jpg" id="img2" class="imgcard" max-height="1000px">
            </div>
        </div>
    </div>
    </div>
    <script type="text/javascript">
        if (document.body.clientWidth <= 500) document.getElementById("img1").style.width = document.body.clientWidth * 0.9 + "px";
        if (document.body.clientWidth <= 500) document.getElementById("img2").style.width = document.body.clientWidth * 0.9 + "px";
        var hashnum = getQueryVariable("hashnum");
        var isValid = false;
        for (var i = 0; i < DATA.length; ++i) {
            if (DATA[i]["phone number"] === hashnum) {
                //document.getElementsByClassName("text_group").style.width="50%";
                //document.getElementsByClassName("text_group").style.left="50%";
                if (DATA[i]["number"] <= 128 || DATA[i]["number"]==148|| DATA[i]["number"]==257 || DATA[i]["number"]==256 || DATA[i]["number"]==258 ) {
                    document.getElementsByClassName("lucktext")[0].innerHTML = "亲爱的" + DATA[i]["name"] + "同学：";
                    document.getElementsByClassName("lucktext")[1].innerHTML += "\n 诚挚地邀请您出席2020年Rhapsodia冬季舞会。您的编号是：" + DATA[i]["number"];
                    document.getElementsByClassName("lucktext")[2].innerHTML += "\n 主办方：上海交通大学密西根学院学生会";
                    document.getElementsByClassName("lucktext")[3].innerHTML += "\n 时间：2020年12月13日";
                    document.getElementsByClassName("lucktext")[4].innerHTML += "\n 地点：上海市普陀区泸定路46号嘉庭俱乐部内";
                    if (DATA[i]["number"] <= 43 || DATA[i]["number"]==148) {
                        document.getElementsByClassName("lucktext")[5].innerHTML += "\n您的大巴上车时间：12月13日15:45分";
                    }
                    if (DATA[i]["number"] >= 44 && DATA[i]["number"] <= 86 || DATA[i]["number"]==257) {
                        document.getElementsByClassName("lucktext")[5].innerHTML += "\n您的大巴上车时间：12月13日16:00分";
                    }
                    if (DATA[i]["number"] >= 87 && DATA[i]["number"] <= 128 || DATA[i]["number"]==256 || DATA[i]["number"]==258)  {
                        document.getElementsByClassName("lucktext")[5].innerHTML += "\n您的大巴上车时间：12月13日16:15分";
                    }
                    document.getElementsByClassName("lucktext")[6].innerHTML += "\n上车地点：东20寝室楼东侧(植物园西侧)学森路"; 
                }
                else {
                    document.getElementsByClassName("nolucktext")[0].innerHTML = "亲爱的" + DATA[i]["name"] + "同学：";
                    document.getElementsByClassName("nolucktext")[1].innerHTML += "\n 诚挚地邀请您出席2020年Rhapsodia冬季舞会。";
                    document.getElementsByClassName("nolucktext")[2].innerHTML = "您的编号是：" + DATA[i]["number"];
                    document.getElementsByClassName("nolucktext")[3].innerHTML += "\n 主办方：上海交通大学密西根学院学生会";
                    document.getElementsByClassName("nolucktext")[4].innerHTML += "\n 时间：2020年12月13日";
                    document.getElementsByClassName("nolucktext")[5].innerHTML += "\n 地点：上海市普陀区泸定路46号嘉庭俱乐部内";
                }
                isValid = true;
                break;
            }
        }
        if (!isValid) {
            document.getElementsByClassName("unlucktext")[0].innerHTML = "很遗憾，";
            document.getElementsByClassName("unlucktext")[1].innerHTML = "您没有成功报名";
            document.getElementsByClassName("unlucktext")[2].innerHTML = "2020Rhapsodia密院冬季舞会。";
            document.getElementsByClassName("unlucktext")[3].innerHTML = "期待在明年舞会上与您相见！";
        }
        function flip() {
            if (document.getElementById("card").className == "cardpage") {
                document.getElementById("card").className = "cardpage is-fliped";
            }
            else {
                document.getElementById("card").className = "cardpage";
            }
        }
        function getQueryVariable(variable) {
            var query = window.location.search.substring(1);
            var vars = query.split("&");
            for (var i = 0; i < vars.length; i++) {
                var pair = vars[i].split("=");
                if (pair[0] == variable) {
                    return pair[1];
                }
            }
            return (false);
        }
    </script>
</body>

</html>